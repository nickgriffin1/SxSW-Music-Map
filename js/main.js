var model = [
	{
		"title": "Barcelona",
		"id": "barcelona",
		"location": "209 E 6th St",
		"lat": 30.267403,
		"lon": -97.741162,
		"link": "",
		"lineup": [
			{
				"title": "",
				"date": "Wednesday, March 18",
				"setTimes": [
					"DJ TRE - 8:00PM",
					"Ikonika - 9:45PM",
					"Kode9 - 11:15PM",
					"Taso - 12:30AM",
					"DJ Spinn - 1:00AM"
				]
			},
			{
				"title": "",
				"date": "Thursday, March 19",
				"setTimes": [
					"Landau - 8:00PM",
					"Dylan Stark - 9:00PM",
					"Braille - 10:00PM",
					"DJ Earl - 1:00PM",
					"L-Vis 1990 - 12:00AM",
					"Avalon Emerson - 1:00AM"
				]
			},
			{
				"title": "",
				"date": "Friday, March 20",
				"setTimes": [
					"DJ Dana Lu - 8:00PM",
					"DJ Tiga - 8:30PM",
					"Gonzalo Silva - 10:00PM",
					"Ezrakh - 10:30PM",
					"Vaneck (Fiinesse) - 11:00PM",
					"Dougie F - 11:25PM",
					"Nadus - 1:00AM",
					"Sliink - 1:30AM"
				]
			}
		]
	},
	{
		"title": "Spotify House",
		"id": "spotifyHouse",
		"location": "901 E 6th St",
		"lat": 30.265091,
		"lon": -97.733316,
		"link": "spotifyhouse.com",
		"lineup": [

		]
	},
	{
		"title": "Stubb's",
		"id": "stubbs",
		"location": "801 Red River St",
		"lat": 30.268494,
		"lon": -97.736140,
		"link": "stubbsaustin.com",
		"lineup": [
			{
				"title": "NPR Music Showcase",
				"date": "Wednesday, March 18",
				"setTimes": [
					"Boogie - 8:00PM",
					"Shamir - 8:50PM",
					"Courtney Barnett - 9:50PM",
					"Stromae - 11:00PM",
					"TV on the Radio - 12:30AM"
				]
			},
			{
				"title": "Special Early Show",
				"date": "Thursday, March 19",
				"setTimes": [
					"The Zombies - 7:00PM",
					"Tei Shi - 8:00PM",
					"Max Frost - 9:00PM",
					"Ryn Weaver - 10:00PM",
					"Urban Cone - 10:40PM",
					"MS MR - 11:00PM",
					"LANY - 11:50PM",
					"Milky Chance - 12:15AM"
				]
			},
		]
	},
	{
		"title": "Empire Control Room",
		"id": "empireControlRoom",
		"location": "606 E 7th St",
		"lat": 30.267424,
		"lon": -97.736057,
		"link": "empireatx.com",
		"lineup": [
			{
				"title": "Presented by Cómeme",
				"date": "Wednesday, March 18",
				"setTimes": [
					"Cristian S. - 8:00PM",
					"Daniel Maloso - 10:00PM",
					"Matías Aguayo - 11:00PM",
					"Taso - 12:30AM",
					"Lena Willikens - 12:45AM"
				]
			},
			{
				"title": "Presented by Monstercat",
				"date": "Thursday, March 19",
				"setTimes": [
					"Aero Chord",
					"Grabbitz",
					"Haywyre",
					"Razihel",
				]
			},
			{
				"title": "Presented by Leaving Records",
				"date": "Friday, March 20",
				"setTimes": [
					"Brogan Bently - 9:00PM",
					"Trance Farmers - 9:40PM",
					"Benedek - 10:10PM",
					"Mndsgn - 11:00PM",
					"Samiyam - 11:40PM",
					"Ras G - 12:20AM"
				]
			},
			{
				"title": "Presented by Neon Gold",
				"date": "Saturday, March 21",
				"setTimes": [
					"VÉRITÉ - 8:30PM",
					"Cathedrals - 9:30PM",
					"Alex Winston - 10:30PM",
					"Tunji Ige - 11:30PM",
					"Samiyam - 11:40PM",
					"ASTR - 1:30AM"
				]
			}
		]
	},
	{
		"title": "House of Vans",
		"id": "houseofVans",
		"location": "Mowhawk, 912 Red River St",
		"lat": 30.270153,
		"lon": -97.736086,
		"link": "vans.com/sxsw15.html",
		"lineup": [
			{
				"title": "Pitchfork (day) and Vans (night)",
				"date": "Wednesday, March 18",
				"setTimes": [
					"~ Outdoor Stage ~",
					"Torres - 12:30PM",
					"Speedy Ortiz - 1:15PM",
					"Steve Gunn - 2:15PM",
					"Viet Cong - 3:15PM",
					"Courtney Barnett - 4:15PM",
					"Rae Sremmurd - 5:15PM",
					"Girlpool - 8:00PM",
					"Alvvays - 9:00PM",
					"Metz - 10:00PM",
					"The Damned - 11:00PM",
					"Thee Oh Sees - 12:00AM",
					"Future Islands - 1:00AM",
					"~ Indoor Stage ~",
					"Lydia Ainsworth - 1:00PM",
					"Natalie Prass - 2:00PM",
					"Son Lux - 2:45PM",
					"Shamir - 3:30PM",
					"AG Cook - 4:15PM",
					"Sophie - 5:00PM",
					"Sal Show - 7:45PM",
					"Free Weed - 8:15PM",
					"The Shivas - 9:15PM",
					"Meat Market 10:15PM",
					"Guantanamo Baywatch - 11:15PM",
					"The Memories - 12:15AM",
					"Part Time - 1:15AM"
				]
			},
			{
				"title": "Pitchfork (day) and Domino Recording (night)",
				"date": "Thursday, March 19",
				"setTimes": [
					"~ Outdoor Stage ~",
					"Hundred Waters - 12:30PM",
					"Alvvays - 1:15PM",
					"Will Butler - 2:15PM",
					"Title Fight - 3:00PM",
					"Waxahatchee - 3:45PM",
					"Vince Staples - 4:30PM",
					"Migos - 5:15PM",
					"Alex G - 9:00PM",
					"Bob Moses - 10:00PM",
					"Mathew E. White - 11:00PM",
					"Hamilton Leithauser - 12:00AM",
					"Laura Marling - 1:00AM",
					"~ Indoor Stage ~",
					"Bully - 1:00PM",
					"Makthaverskan - 2:00PM",
					"Untold - 3:00PM",
					"Twerps - 4:00PM",
					"Windows98 (Win Butler of Arcade Fire) - 4:45PM",
					"Meatbodies - 8:30PM",
					"Girl Band - 9:30PM",
					"Boxed In - 10:30PM",
					"Son Lux - 11:30PM",
					"The Mynabirds - 12:30PM"
				]
			},
			{
				"title": "Windish (day) and Rhymesayers (night)",
				"date": "Friday, March 20",
				"setTimes": [
					"~ Outdoor Stage ~",
					"JUCE - 12:30PM",
					"Natalie Prass - 1:20PM",
					"Alvvays - 2:30PM",
					"BØRNS - 3:30PM",
					"Lido - 4:20PM",
					"ODESZA - 5:20PM",
					"Get Cyphy - 8:00PM",
					"deM atlaS - 9:00PM",
					"PROF - 9:45PM",
					"Grieves - 10:30PM",
					"Brother Ali - 11:15PM",
					"Dilated Peoples - 11:45PM",
					"Atmosphere - 12:45PM",
					"~ Indoor Stage ~",
					"Only Real - 12:00PM",
					"Son Lux - 1:00PM",
					"Shura - 2:00PM",
					"Wolf Alice - 4:00PM",
					"Cathedrals - 4:50PM",
					"DJ Halo - 7:30PM",
					"Modie Black - 8:15PM",
					"Paranoid Castle - 9:15PM",
					"Milo - 10:15PM",
					"Ceschi - 11:15PM",
					"Dark Time Sunshine - 12:15AM",
					"Buck 65 - 1:15AM"
				]
			},
			{
				"title": "Fun Fun Fun (day) and Wedidit (night)",
				"date": "Saturday, March 21",
				"setTimes": [
					"~ Outdoor Stage ~",
					"The Blind Shake - 12:30PM",
					"Thee Oh Sees - 1:20PM",
					"Ceremony - 2:25PM",
					"Swervedriver - 3:35PM",
					"Ghostface Killah w/ Badbadnotgood - 4:50PM",
					"Nick Melons 8:15PM",
					"Eric Dingus - 9:00PM",
					"D33J - 9:30PM",
					"Groundislava - 10:00PM",
					"Ryan Hemsworth - 10:30PM",
					"Purple - 11:10PM",
					"Tory Lanez - 11:40PM",
					"Shlohmo - 12:00AM",
					"TBD Special Guest - 1:00AM",
					"~ Indoor Stage ~",
					"The Outfit - 12:45PM",
					"Lust for Youth - 1:30PM",
					"Orthy - 2:15PM",
					"Roger Sellers - 3:00PM",
					"Rat Fist (Randy of No Age + Sean of Pissed Jeans) - 3:45PM",
					"Code Orange - 4:30PM",
					"Powertrip - 5:10PM"
				]
			}
		]
	},
	{
		"title": "Pandora Discovery Den",
		"id": "pandoraDiscoveryDen",
		"location": "The Gatsby, 708 E 6th St",
		"lat": 30.266362,
		"lon": -97.735488,
		"link": "blog.pandora.com/2015/03/03/announcing-the-4th-annual-sxsw-pandora-discovery-den-lineup",
		"lineup": [
			{
				"title": "",
				"date": "Wednesday, March 18",
				"setTimes": [
					"Elliphant - 2:00PM",
					"Peking Duck - 3:00PM",
					"Halsey - 4:00PM",
					"ODESZA - 5:00PM",
					"~ Doors Close - 6:00PM ~",
					"Lolawolf - 8:00PM",
					"Robert Delong - 9:00PM",
					"Griz - 10:00PM",
					"Gorgon City - 11:00PM",
					"Cazzette - 12:00AM"
				]
			},
			{
				"title": "",
				"date": "Thursday, March 19",
				"setTimes": [
					"Antonique Smith - 2:00PM",
					"Sam Dew - 3:00PM",
					"Raury - 4:00PM",
					"SZA - 5:00PM",
					"~ Doors Close - 6:00PM ~",
					"BJ the Chicago Kid - 8:00PM",
					"Rich Homie Quan - 9:00PM",
					"Earl Sweatshirt - 10:00PM",
					"Migos - 11:00PM",
					"Wyclef Jean - 12:00AM"
				]
			},
			{
				"title": "",
				"date": "Friday, March 20",
				"setTimes": [
					"Andrew Combs - 2:00PM",
					"Israel Nash - 3:00PM",
					"The Deslondes - 4:00PM",
					"White Horse - 5:00PM",
					"~ Doors Close - 6:00PM ~",
					"Della Mae - 8:00PM",
					"Madisen Ward and the Mama Bear - 9:00PM",
					"Jamestown Revival - 10:00PM",
					"Houndmouth - 11:00PM",
					"Green River Ordinance - 12:00AM",
					"Whitney Morgan and the 78's - 1:00AM"
				]
			},
			{
				"title": "",
				"date": "Saturday, March 21",
				"setTimes": [
					"Ex Cops - 2:00PM",
					"Zella Day - 3:00PM",
					"Joywave - 4:00PM",
					"Palma Violets - 5:00PM",
					"~ Doors Close - 6:00PM ~",
					"Kaleo - 8:00PM",
					"Priory - 9:00PM",
					"Bid Data - 10:00PM",
					"San Fermin - 11:00PM",
					"The Black Angels - 12:00PM"
				]
			}
		]
	},
	{
		"title": "ACL Live",
		"id": "aclLive",
		"location": "Moody Theater, 310 Willie Nelson Blvd",
		"lat": 30.265438,
		"lon": -97.747149,
		"link": "acl-live.com",
		"lineup": [
			{
				"title": "",
				"date": "Wednesday, March 18",
				"setTimes": [
					
				]
			},
			{
				"title": "",
				"date": "Thursday, March 19",
				"setTimes": [

				]
			},
			{
				"title": "",
				"date": "Friday, March 20",
				"setTimes": [

				]
			},
			{
				"title": "",
				"date": "Saturday, March 21",
				"setTimes": [

				]
			}
		]
	},
	{
		"title": "Hype Hotel",
		"id": "hypeHotel",
		"location": "Fair Market, 1100 E 5th St",
		"lat": 30.264017,
		"lon": -97.731517,
		"link": "hypem.com/hotel/2015",
		"lineup": [
			{
				"title": "",
				"date": "Wednesday, March 18",
				"setTimes": [

				]
			},
			{
				"title": "",
				"date": "Thursday, March 19",
				"setTimes": [

				]
			},
			{
				"title": "",
				"date": "Friday, March 20",
				"setTimes": [

				]
			},
			{
				"title": "",
				"date": "Saturday, March 21",
				"setTimes": [

				]
			}
		]
	},
	{
		"title": "Tumblr IRL",
		"id": "tumblrIRL",
		"location": "Ironwood Hall, 505 E 7th St",
		"lat": 30.267326,
		"lon": -97.737532,
		"link": "tumblrirl.do512.com/tumblrirl2015",
		"lineup": [
			{
				"title": "",
				"date": "Wednesday, March 18",
				"setTimes": [
					"Twin Shadow - 7:00PM"
				]
			},
			{
				"title": "",
				"date": "Thursday, March 19",
				"setTimes": [
					"Courtney Barnett - 1:00PM",
					"ODESZA - 11:00PM"
				]
			},
			{
				"title": "",
				"date": "Friday, March 20",
				"setTimes": [
					"Tobias Jesso Jr. - 1:00PM",
					"Travis Scott - 7:00PM"
				]
			},
			{
				"title": "",
				"date": "Saturday, March 21",
				"setTimes": [
					"Houndmouth - 1:00PM"
				]
			}
		]
	},
	{
		"title": "Fader Fort",
		"id": "faderFort",
		"location": "",
		"lat": ,
		"lon": ,
		"link": "",
		"lineup": [
			{
				"title": "",
				"date": "Wednesday, March 18",
				"setTimes": [

				]
			},
			{
				"title": "",
				"date": "Thursday, March 19",
				"setTimes": [

				]
			},
			{
				"title": "",
				"date": "Friday, March 20",
				"setTimes": [

				]
			},
			{
				"title": "",
				"date": "Saturday, March 21",
				"setTimes": [

				]
			}
		]
	}
];

//collapses navbar onclick
$('.nav a').on('click', function(){
    $(".navbar-toggle").click() 
});

//custom knockout binding to initialize map
ko.bindingHandlers.map = {
    init: function (element, valueAccessor, allBindingsAccessor, viewModel) {
        var mapObj = ko.utils.unwrapObservable(valueAccessor());

        var latLng = new google.maps.LatLng(
            ko.utils.unwrapObservable(mapObj.lat),
            ko.utils.unwrapObservable(mapObj.lng)
        );

        var mapOptions = { 
        	center: { lat: 30.267392, lng: -97.740155 },
            zoom: 15, 
        };

        //creates map using mapOptions to specify initial zoom and placement
        mapObj.googleMap = new google.maps.Map(element, mapOptions);

        //used in for loop to add event listener to the markers, implemented outside of for loop as a closure
        function eventListenerMaker(marker, x) {
        	//zooms and centers map onclick of marker
			google.maps.event.addListener(marker, 'click', function() {
				mapObj.googleMap.setZoom(17);
				mapObj.googleMap.setCenter(marker.getPosition());
				infowindow.open(mapObj.googleMap, marker);
			});

			//onclick the infowindow will display relevant information to the venue
  			var infowindow = new google.maps.InfoWindow({
  				content: "<h6>" + model[x].title + "</h6><p>" + model[x].location + "</p><a>" + model[x].link + "</a><br><a type=\"button\" class=\"btn btn-default\" href=\"#" + model[x].id + "\">Lineup</a>"
			});
  		}

        //adds the markers to the map from the model array
        for (x = 0; x < model.length; x++) {
        	//sets parameters for the markers
			var marker = new google.maps.Marker({
				position: new google.maps.LatLng(model[x].lat, model[x].lon),
				map: mapObj.googleMap,
				animation: google.maps.Animation.DROP,
				title: model[x].title
			});

			eventListenerMaker(marker, x);
  		};
    }
};

var viewModel = function() {
	var self = this;

	//creates map on page
	this.myMap = ko.observable({});
};

ko.applyBindings(new viewModel());